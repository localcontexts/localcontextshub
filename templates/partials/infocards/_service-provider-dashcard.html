{% load static %}{% load custom_service_provider_tags %}

    <div class="dashcard">

        <!-- Top Nav -->
        <div class="flex-this w-100 space-between">
            <div class="loc grey-text bold">
                <small>
                    <a href="{% url 'dashboard' %}" class="default-a">
                        {% firstof request.user.first_name request.user %}
                    </a>
                    >> {{ service_provider.name }}
                </small>
            </div>

            <!-- Notifications -->
            <div class="flex-this w-30 flex-end">
                {% include 'snippets/notifications.html' with scope=service_provider %}

                {% if request.user == service_provider.account_creator %}
                    <div class="ml-8">
                        <a
                            href="{% url 'update-service-provider' service_provider.id%}"
                            class="darkteal-text primary-btn white-btn"
                        >
                            Settings <i class="fa fa-cog" aria-hidden="true"></i>
                        </a>
                    </div>
                {% endif %}
            </div>

        </div>
            <!-- Image, headers, description -->
        <div class="flex-this">

                <div class="dashcard-img-container">
                    <img loading="lazy"
                        class="profile-img"
                        src="{% if service_provider.image %} {{ service_provider.image.url }} {% else %} {% static 'images/placeholders/service-provider-place.jpg' %}{% endif %}"
                        alt="{{ service_provider.name }} image"
                    >
                    {% if service_provider and service_provider.is_certified %}
                        <div class="certified-overlay">
                            <img
                                src="{% static 'images/logos/sp-badge-orange.png' %}"
                                width="157px"
                                height="47px"
                            >
                        </div>
                    {% endif %}
                </div>
                <div class="flex-this column dashcard-text-container">
                    <h3 class="dashcard-h3 darkteal-text">{{ service_provider.name }}</h3>
                    <div>
                        <p class="primary-black-text dashcard-subheader">Service Provider</p>
                    </div>
                    <div>
                        <p class="dashcard-description description-sm">
                            {% if service_provider.description %}{{ service_provider.description }} {% else %}No description provided. {% endif %}
                        </p>
                    </div>
                </div>

                <!-- Count cards -->
                <div class="flex-this column stats-card-container bold mr-0">

                    <!-- Count of accounts connected to the Service Provider -->
                    <div class="stats-card flex-this flex-start">
                        <div>
                            <p>
                                {% connections_count service_provider as connect_count %}
                                {% if connect_count < 10 %}0{{ connect_count }}{% else %}{{ connect_count }}{% endif %}
                            </p>
                        </div>
                        <div class="ml-16"><span>Connections</span></div>
                    </div>

                    <!-- Count of members added to Service Provider account -->
                    <div class="stats-card flex-this flex-start">
                        <div>
                            <p>
                                {% if service_provider.get_member_count < 10 %} 0{{ service_provider.get_member_count }} {% else %} {{ service_provider.get_member_count }} {% endif %}
                            </p>
                        </div>
                        <div class="ml-16"><span>Members</span></div>
                    </div>

                </div>

        </div>

    </div>
